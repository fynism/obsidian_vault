# Java 正则表达式详解

## 一、概述

正则表达式（Regular Expression）是一种用于匹配字符串模式的工具，Java 通过`java.util.regex`包提供支持，核心类包括`Pattern`（编译正则表达式）和`Matcher`（匹配操作）。

## 二、基本格式

### 1. 字符匹配

- **普通字符**：直接匹配自身（如`abc`匹配字符串 "abc"）
- **元字符**：需转义（Java 中用`\\`），包括`. * + ? | { } [ ] ( ) \ ^ $`
- **字符类**：
  - `[abc]`：匹配 a、b 或 c
  - `[^abc]`：匹配非 a、b、c 的字符
  - `[a-z]`：匹配小写字母
  - `[A-Z0-9]`：匹配大写字母或数字
- **预定义字符**：
  - `.`：匹配任意字符（除换行符）
  - `\d`：数字（等价`[0-9]`）
  - `\w`：单词字符（等价`[a-zA-Z0-9_]`）
  - `\s`：空白字符（空格、制表符等）

### 2. 数量限定

- `*`：0 次或多次
- `+`：1 次或多次
- `?`：0 次或 1 次
- `{n}`：恰好 n 次
- `{n,}`：至少 n 次
- `{n,m}`：n 到 m 次

### 3. 边界匹配

- `^`：行首
- `$`：行尾
- `\b`：单词边界

### 4. 逻辑操作

- `|`：或（如`a|b`匹配 a 或 b）
- `()`：分组（如`(abc)+`匹配连续的 abc）

## 三、核心 API 使用

### 1. 编译正则表达式

```java
Pattern pattern = Pattern.compile("\\d+"); // 编译正则表达式
```

### 2. 创建匹配器

```java
Matcher matcher = pattern.matcher("123abc456");
```

### 3. 常用方法

- `matches()`：完全匹配
- `find()`：查找下一个匹配子串
- `group()`：获取匹配结果
- `replaceAll()`：替换所有匹配项

## 四、用途

1. **字符串验证**：如邮箱、手机号格式校验
2. **字符串查找 / 提取**：提取文本中的数字、关键词
3. **字符串替换**：批量替换特定模式内容
4. **字符串分割**：按正则规则分割字符串（如`split("\\s+")`按空格分割）

## 五、示例

### 邮箱验证

```java
String regex = "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$";
boolean isValid = Pattern.matches(regex, "test@example.com");
```

### 提取数字

```java
Pattern pattern = Pattern.compile("\\d+");
Matcher matcher = pattern.matcher("价格：99元，数量：5");
while (matcher.find()) {
    System.out.println(matcher.group()); // 输出99、5
}
```

*****

# 邮箱详解

### 整体结构拆分

该正则表达式分为三部分：**用户名部分** + `@` 符号 + **域名部分**，通过边界匹配确保整体格式符合邮箱规范。

------

### 1. `^`：行首匹配

- 表示正则匹配必须从字符串的开头开始，避免邮箱前出现多余字符。

------

### 2. `[a-zA-Z0-9._%+-]+`：邮箱用户名部分

- `[]`：字符类，匹配其中任意一个字符。
  - `a-zA-Z`：匹配大小写英文字母。
  - `0-9`：匹配数字。
  - `._%+-`：匹配特殊符号（点、下划线、百分号、加号、减号），这些是邮箱用户名允许的常见符号。
- `+`：数量限定符，表示前面的字符类内容**至少出现 1 次**（用户名不能为空）。

------

### 3. `@`：固定符号匹配

- 匹配邮箱中的`@`符号，是用户名和域名的分隔符。

------

### 4. `[a-zA-Z0-9.-]+`：域名主体部分（如`example.com`中的`example`）

- `[]`：字符类，匹配域名主体允许的字符：
  - `a-zA-Z0-9`：大小写字母和数字。
  - `.-`：匹配点（`.`）和减号（`-`），域名中允许出现这两个符号（如`example-co.uk`）。
- `+`：表示域名主体**至少出现 1 次**（不能为空）。

------

### 5. `\\.`：域名中的点分隔符（如`example.com`中的`.`）

- `\\.`：匹配实际的点（`.`）。由于`.`在正则中是元字符（匹配任意字符），因此需要用`\\`转义，使其仅匹配字面量`.`。

------

### 6. `[a-zA-Z]{2,}`：域名后缀部分（如`com`、`cn`、`org`）

- `[a-zA-Z]`：仅匹配大小写英文字母（后缀通常为纯字母）。
- `{2,}`：数量限定符，表示**至少出现 2 次**（后缀长度至少 2 位，如`cn`、`com`、`info`等）。

------

### 7. `$`：行尾匹配

- 表示正则匹配必须到字符串末尾结束，避免域名后出现多余字符。

------

### 匹配示例

- 有效匹配：`test@example.com`、`user.name+tag@example-co.uk`、`123abc@example.cn`。
- 无效匹配：`test@.com`（域名主体为空）、`test@example.c`（后缀长度不足）、`test@example com`（无`.`分隔后缀）。

